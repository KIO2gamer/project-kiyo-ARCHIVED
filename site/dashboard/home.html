<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="theme-color" content="#5865f2" />
		<meta
			name="description"
			content="Kiyo Bot Dashboard - Manage your Discord server settings and view statistics"
		/>
		<title>Kiyo Bot - Dashboard</title>

		<!-- Preload critical assets -->
		<link rel="preload" href="/assets/css/dashboard.css" as="style" />
		<link rel="preload" href="/assets/img/logo.png" as="image" />
		<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />

		<!-- Stylesheets -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
		/>
		<link rel="stylesheet" href="/assets/css/dashboard.css" />

		<!-- Favicon -->
		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="/assets/img/favicon-32x32.png"
		/>
		<link
			rel="icon"
			type="image/png"
			sizes="16x16"
			href="/assets/img/favicon-16x16.png"
		/>
		<link
			rel="shortcut icon"
			href="/assets/img/favicon.ico"
			type="image/x-icon"
		/>
	</head>
	<body>
		<!-- Skip to main content for accessibility -->
		<a href="#main-content" class="visually-hidden-focusable"
			>Skip to main content</a
		>

		<div class="dashboard-container">
			<!-- Sidebar -->
			<aside
				class="sidebar"
				role="navigation"
				aria-label="Main navigation"
			>
				<div class="sidebar-header">
					<img
						src="/assets/img/logo.png"
						alt=""
						class="sidebar-logo"
						aria-hidden="true"
					/>
					<h1>Kiyo Dashboard</h1>
				</div>
				<nav class="sidebar-nav">
					<ul>
						<li class="nav-item active" id="nav-home">
							<a href="/dashboard/home" aria-current="page">
								<i
									class="bi bi-house-door"
									aria-hidden="true"
								></i>
								Home
							</a>
						</li>
						<li class="nav-item" id="nav-servers">
							<a href="/dashboard/servers">
								<i class="bi bi-server" aria-hidden="true"></i>
								Servers
							</a>
						</li>
						<li class="nav-item" id="nav-commands">
							<a href="/dashboard/commands">
								<i class="bi bi-command" aria-hidden="true"></i>
								Commands
							</a>
						</li>
						<li class="nav-item" id="nav-settings">
							<a href="/dashboard/settings">
								<i class="bi bi-gear" aria-hidden="true"></i>
								Settings
							</a>
						</li>
					</ul>
				</nav>
				<div class="sidebar-footer">
					<a href="/" class="btn btn-outline-light btn-sm">
						<i class="bi bi-box-arrow-left" aria-hidden="true"></i>
						Back to Site
					</a>
				</div>
			</aside>

			<!-- Main Content -->
			<main class="main-content" id="main-content">
				<header class="content-header">
					<div
						class="d-flex justify-content-between align-items-center flex-wrap gap-3"
					>
						<h2>
							<i class="bi bi-house-door" aria-hidden="true"></i>
							Dashboard Overview
						</h2>
						<div class="user-profile" id="user-profile">
							<div
								class="spinner-border spinner-border-sm text-primary"
								role="status"
							>
								<span class="visually-hidden"
									>Loading user profile...</span
								>
							</div>
						</div>
					</div>
				</header>

				<div class="content-body">
					<!-- Stats Cards -->
					<div class="row g-4 mb-4">
						<div class="col-xl-3 col-md-6">
							<div
								class="stat-card animate-fadeInUp"
								style="animation-delay: 0.1s"
							>
								<div class="stat-card-icon">
									<i
										class="bi bi-server"
										aria-hidden="true"
									></i>
								</div>
								<div class="stat-card-content">
									<h3
										id="server-count"
										aria-label="Total servers"
									>
										-
									</h3>
									<p>Active Servers</p>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-md-6">
							<div
								class="stat-card animate-fadeInUp"
								style="animation-delay: 0.2s"
							>
								<div class="stat-card-icon">
									<i
										class="bi bi-people"
										aria-hidden="true"
									></i>
								</div>
								<div class="stat-card-content">
									<h3
										id="user-count"
										aria-label="Total users"
									>
										-
									</h3>
									<p>Total Users</p>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-md-6">
							<div
								class="stat-card animate-fadeInUp"
								style="animation-delay: 0.3s"
							>
								<div class="stat-card-icon">
									<i
										class="bi bi-chat-left-text"
										aria-hidden="true"
									></i>
								</div>
								<div class="stat-card-content">
									<h3
										id="channel-count"
										aria-label="Total channels"
									>
										-
									</h3>
									<p>Active Channels</p>
								</div>
							</div>
						</div>
						<div class="col-xl-3 col-md-6">
							<div
								class="stat-card animate-fadeInUp"
								style="animation-delay: 0.4s"
							>
								<div class="stat-card-icon">
									<i
										class="bi bi-command"
										aria-hidden="true"
									></i>
								</div>
								<div class="stat-card-content">
									<h3
										id="command-count"
										aria-label="Total commands"
									>
										-
									</h3>
									<p>Available Commands</p>
								</div>
							</div>
						</div>
					</div>

					<!-- Server List -->
					<div
						class="server-selector animate-fadeInUp"
						style="animation-delay: 0.5s"
					>
						<div
							class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-4"
						>
							<h3 class="h5 mb-0">
								<i
									class="bi bi-server me-2"
									aria-hidden="true"
								></i
								>Your Servers
							</h3>
							<a
								href="/dashboard/servers"
								class="btn btn-primary btn-sm"
							>
								View All Servers
							</a>
						</div>
						<div id="managed-servers" class="server-grid">
							<div class="text-center py-4">
								<div class="loading" role="status">
									<span class="visually-hidden"
										>Loading servers...</span
									>
								</div>
								<p class="mt-3 text-muted">
									Loading your servers...
								</p>
							</div>
						</div>
					</div>

					<!-- Recent Activity -->
					<div
						class="command-category animate-fadeInUp"
						style="animation-delay: 0.6s"
					>
						<div
							class="d-flex justify-content-between align-items-center flex-wrap gap-3 mb-4"
						>
							<h3 class="h5 mb-0">
								<i
									class="bi bi-activity me-2"
									aria-hidden="true"
								></i
								>Recent Activity
							</h3>
							<div class="dropdown">
								<button
									class="btn btn-outline-secondary btn-sm dropdown-toggle"
									type="button"
									id="activityFilterDropdown"
									data-bs-toggle="dropdown"
									aria-expanded="false"
								>
									Filter
								</button>
								<ul
									class="dropdown-menu dropdown-menu-end"
									aria-labelledby="activityFilterDropdown"
								>
									<li>
										<button
											class="dropdown-item active"
											type="button"
											data-filter="all"
										>
											All Activity
										</button>
									</li>
									<li>
										<button
											class="dropdown-item"
											type="button"
											data-filter="moderation"
										>
											Moderation
										</button>
									</li>
									<li>
										<button
											class="dropdown-item"
											type="button"
											data-filter="commands"
										>
											Commands
										</button>
									</li>
									<li>
										<button
											class="dropdown-item"
											type="button"
											data-filter="system"
										>
											System
										</button>
									</li>
								</ul>
							</div>
						</div>
						<div id="recent-activity" class="activity-container">
							<ul
								class="activity-list"
								id="activity-list"
								aria-label="Recent activity list"
							>
								<!-- Activity items will be loaded here via JavaScript -->
							</ul>
						</div>
					</div>
				</div>
			</main>

			<!-- Mobile Navigation Toggle -->
			<button
				type="button"
				class="navbar-toggle d-lg-none"
				aria-label="Toggle navigation"
				id="sidebarToggle"
			>
				<i class="bi bi-list" aria-hidden="true"></i>
			</button>
		</div>

		<!-- Scripts -->
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
			defer
		></script>
		<script src="/assets/js/dashboard.js" defer></script>
		<script>
			// Initialize tooltips and popovers
			document.addEventListener('DOMContentLoaded', function () {
				// Initialize Bootstrap components
				const tooltipTriggerList = [].slice.call(
					document.querySelectorAll('[data-bs-toggle="tooltip"]'),
				);
				tooltipTriggerList.map(function (tooltipTriggerEl) {
					return new bootstrap.Tooltip(tooltipTriggerEl);
				});

				// Mobile sidebar toggle
				const sidebarToggle = document.getElementById('sidebarToggle');
				const sidebar = document.querySelector('.sidebar');

				if (sidebarToggle && sidebar) {
					sidebarToggle.addEventListener('click', () => {
						sidebar.classList.toggle('show');
					});
				}

				// Close sidebar when clicking outside on mobile
				document.addEventListener('click', (e) => {
					if (
						window.innerWidth < 992 &&
						!sidebar.contains(e.target) &&
						!sidebarToggle.contains(e.target) &&
						sidebar.classList.contains('show')
					) {
						sidebar.classList.remove('show');
					}
				});
			});
		</script>
	</body>
</html>
