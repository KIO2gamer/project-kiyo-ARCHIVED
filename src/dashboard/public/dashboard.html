<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Kiyo Dashboard</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
			body {
				font-family: Arial, sans-serif;
				background: #f0f2f5;
				color: #333;
				margin: 0;
				padding: 0;
			}
			header {
				background: #7289da;
				padding: 1em;
				color: white;
				text-align: center;
			}
			nav {
				background: #2c2f33;
				padding: 1em;
			}
			nav a {
				color: white;
				margin-right: 1em;
				text-decoration: none;
			}
			.container {
				padding: 1em;
			}
			.card {
				background: white;
				padding: 1em;
				margin: 1em 0;
				border-radius: 5px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}
		</style>
	</head>
	<body>
		<header>
			<h1>Kiyo Discord Bot Dashboard</h1>
		</header>
		<nav>
			<a href="/">Home</a>
			<a href="/commands">Commands</a>
			<a href="/settings">Settings</a>
			<a href="/stats">Statistics</a>
			<a href="/logout" id="logout-link" style="display: none">Logout</a>
		</nav>
		<div class="container">
			<div class="card" id="login-card">
				<!-- This content will be updated based on authentication state -->
			</div>
			<div class="card">
				<h3>Bot Statistics</h3>
				<ul>
					<li>Servers: <span id="servers-count">Loading...</span></li>
					<li>Users: <span id="users-count">Loading...</span></li>
					<li>Uptime: <span id="uptime">Loading...</span></li>
				</ul>
			</div>
		</div>
		<script>
			// Dummy data load example, replace with API calls if needed
			document.getElementById('servers-count').innerText = 12;
			document.getElementById('users-count').innerText = 340;
			document.getElementById('uptime').innerText = '3 days, 4 hours';

			// Simulated authentication example.
			// In production, you could update this based on secure cookie/session data.
			const user = JSON.parse(
				localStorage.getItem('discord_user') || 'null',
			);
			const loginCard = document.getElementById('login-card');
			const logoutLink = document.getElementById('logout-link');

			if (user && user.username) {
				loginCard.innerHTML = `
					<h2>Welcome, ${user.username}!</h2>
					<p>You are logged in via Discord.</p>
					<button id="logout-button">Logout</button>
				`;
				logoutLink.style.display = 'inline';

				// Logout handler clears the local storage token and reloads the page.
				document
					.getElementById('logout-button')
					.addEventListener('click', () => {
						localStorage.removeItem('discord_user');
						window.location.reload();
					});
			} else {
				loginCard.innerHTML = `
					<h2>Welcome, Guest!</h2>
					<p>Please log in with Discord to access your dashboard.</p>
					<button onclick="window.location.href='/.netlify/functions/auth/discord'">Login with Discord</button>
				`;
			}
		</script>
	</body>
</html>
